<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="RustWorkload trait provides a one to one equivalent to the C++ abstract class `FDBWorkload`"><title>RustWorkload in foundationdb_simulation - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-9ee3a5e31a2afa3e.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="foundationdb_simulation" data-themes="" data-resource-suffix="" data-rustdoc-version="1.75.0 (82e1608df 2023-12-21)" data-channel="1.75.0" data-search-js="search-8fbf244ebcf71464.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-9dd44ab47b99a0fb.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../foundationdb_simulation/index.html">foundationdb_simulation</a><span class="version">0.1.0</span></h2></div><h2 class="location"><a href="#">RustWorkload</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.check">check</a></li><li><a href="#tymethod.description">description</a></li><li><a href="#tymethod.get_check_timeout">get_check_timeout</a></li><li><a href="#tymethod.get_metrics">get_metrics</a></li><li><a href="#tymethod.setup">setup</a></li><li><a href="#tymethod.start">start</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In crate foundationdb_simulation</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="index.html">foundationdb_simulation</a>::<wbr><a class="trait" href="#">RustWorkload</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/foundationdb_simulation/lib.rs.html#28-65">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait RustWorkload {
    // Required methods
    fn <a href="#tymethod.description" class="fn">description</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.setup" class="fn">setup</a>(&amp;'static mut self, db: <a class="type" href="type.SimDatabase.html" title="type foundationdb_simulation::SimDatabase">SimDatabase</a>, done: <a class="struct" href="struct.Promise.html" title="struct foundationdb_simulation::Promise">Promise</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.start" class="fn">start</a>(&amp;'static mut self, db: <a class="type" href="type.SimDatabase.html" title="type foundationdb_simulation::SimDatabase">SimDatabase</a>, done: <a class="struct" href="struct.Promise.html" title="struct foundationdb_simulation::Promise">Promise</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.check" class="fn">check</a>(&amp;'static mut self, db: <a class="type" href="type.SimDatabase.html" title="type foundationdb_simulation::SimDatabase">SimDatabase</a>, done: <a class="struct" href="struct.Promise.html" title="struct foundationdb_simulation::Promise">Promise</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.get_metrics" class="fn">get_metrics</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.Metric.html" title="struct foundationdb_simulation::Metric">Metric</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_check_timeout" class="fn">get_check_timeout</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.f64.html">f64</a>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>RustWorkload trait provides a one to one equivalent to the C++ abstract class <code>FDBWorkload</code></p>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.description" class="method"><a class="src rightside" href="../src/foundationdb_simulation/lib.rs.html#31">source</a><h4 class="code-header">fn <a href="#tymethod.description" class="fn">description</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a></h4></section></summary><div class="docblock"><p>Return the name or description of the workload.
Primarily used for tracing.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.setup" class="method"><a class="src rightside" href="../src/foundationdb_simulation/lib.rs.html#40">source</a><h4 class="code-header">fn <a href="#tymethod.setup" class="fn">setup</a>(&amp;'static mut self, db: <a class="type" href="type.SimDatabase.html" title="type foundationdb_simulation::SimDatabase">SimDatabase</a>, done: <a class="struct" href="struct.Promise.html" title="struct foundationdb_simulation::Promise">Promise</a>)</h4></section></summary><div class="docblock"><p>This method is called by the tester during the setup phase.
It should be used to populate the database.</p>
<h5 id="arguments"><a href="#arguments">Arguments</a></h5>
<ul>
<li><code>db</code> - The simulated database.</li>
<li><code>done</code> - A promise that should be resolved to indicate completion</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.start" class="method"><a class="src rightside" href="../src/foundationdb_simulation/lib.rs.html#48">source</a><h4 class="code-header">fn <a href="#tymethod.start" class="fn">start</a>(&amp;'static mut self, db: <a class="type" href="type.SimDatabase.html" title="type foundationdb_simulation::SimDatabase">SimDatabase</a>, done: <a class="struct" href="struct.Promise.html" title="struct foundationdb_simulation::Promise">Promise</a>)</h4></section></summary><div class="docblock"><p>This method should run the actual test.</p>
<h5 id="arguments-1"><a href="#arguments-1">Arguments</a></h5>
<ul>
<li><code>db</code> - The simulated database.</li>
<li><code>done</code> - A promise that should be resolved to indicate completion</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.check" class="method"><a class="src rightside" href="../src/foundationdb_simulation/lib.rs.html#57">source</a><h4 class="code-header">fn <a href="#tymethod.check" class="fn">check</a>(&amp;'static mut self, db: <a class="type" href="type.SimDatabase.html" title="type foundationdb_simulation::SimDatabase">SimDatabase</a>, done: <a class="struct" href="struct.Promise.html" title="struct foundationdb_simulation::Promise">Promise</a>)</h4></section></summary><div class="docblock"><p>This method is called when the tester completes.
A workload should run any consistency/correctness tests during this phase.</p>
<h5 id="arguments-2"><a href="#arguments-2">Arguments</a></h5>
<ul>
<li><code>db</code> - The simulated database.</li>
<li><code>done</code> - A promise that should be resolved to indicate completion</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.get_metrics" class="method"><a class="src rightside" href="../src/foundationdb_simulation/lib.rs.html#61">source</a><h4 class="code-header">fn <a href="#tymethod.get_metrics" class="fn">get_metrics</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.Metric.html" title="struct foundationdb_simulation::Metric">Metric</a>&gt;</h4></section></summary><div class="docblock"><p>If a workload collects metrics (like latencies or throughput numbers), these should be reported back here.
The multitester (or test orchestrator) will collect all metrics from all test clients and it will aggregate them.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.get_check_timeout" class="method"><a class="src rightside" href="../src/foundationdb_simulation/lib.rs.html#64">source</a><h4 class="code-header">fn <a href="#tymethod.get_check_timeout" class="fn">get_check_timeout</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.f64.html">f64</a></h4></section></summary><div class="docblock"><p>Set the check timeout for this workload.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../trait.impl/foundationdb_simulation/trait.RustWorkload.js" async></script></section></div></main></body></html>